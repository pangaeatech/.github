{
  "$schema": "https://docs.renovatebot.com/renovate-schema.json",
  "extends": ["config:recommended", "config:js-app"],
  "baseBranchPatterns": ["main"],
  "branchPrefix": "renovate/",
  "configMigration": true,
  "dependencyDashboard": true,
  "configMigration": true,
  "enabledManagers": ["custom.regex", "npm"],
  "branchConcurrentLimit": 0,
  "lockFileMaintenance": { "enabled": true },
  "prConcurrentLimit": 0,
  "prHourlyLimit": 0,
  "rebaseWhen": "conflicted",
  "separateMajorMinor": true,
  "separateMultipleMajor": true,
  "updateInternalDeps": true,
  "postUpdateOptions": ["yarnDedupeHighest"],
  "packageRules": [
    {
      "matchDepTypes": ["dependencies", "bundledDependencies"],
      "additionalBranchPrefix": "prod/",
      "commitMessagePrefix": "[Prod] ",
      "draftPR": true
    },
    {
      "matchManagers": ["nuget", "custom.regex"],
      "additionalBranchPrefix": "prod/",
      "commitMessagePrefix": "[Prod] ",
      "rangeStrategy": "replace",
      "draftPR": true
    },
    {
      "matchDepTypes": ["devDependencies", "development", "test"],
      "rangeStrategy": "replace",
      "additionalBranchPrefix": "dev/",
      "commitMessagePrefix": "[Dev] ",
      "draftPR": false
    },
    {
      "matchCategories": ["ci", "cd", "node", "engines"],
      "rangeStrategy": "replace",
      "additionalBranchPrefix": "build/",
      "commitMessagePrefix": "[Build] ",
      "groupName": "build",
      "draftPR": false
    },
    {
      "matchDepTypes": ["peerDependencies", "optionalDependencies"],
      "rangeStrategy": "replace",
      "additionalBranchPrefix": "opt/",
      "commitMessagePrefix": "[Opt] ",
      "draftPR": true
    },
    {
      "matchPackageNames": [
        "jest{/,}**",
        "@testing-library{/,}**",
        "eventsourcemock{/,}**",
        "canvas{/,}**",
        "mutation-observer{/,}**",
        "jscpd{/,}**",
        "mock-jwks{/,}**",
        "nock{/,}**",
        "wait-for-expect{/,}**",
        "ts-jest{/,}**",
        "license-checker{/,}**",
        "local-cors-proxy{/,}**",
        "source-map-explorer{/,}**"
      ],
      "groupName": "testing"
    },
    {
      "matchDepTypes": ["test"],
      "groupName": "testing"
    },
    {
      "matchPackageNames": ["eslint{/,}**", "@typescript-eslint{/,}**"],
      "groupName": "eslint"
    },
    {
      "matchPackageNames": [
        "mui{/,}**",
        "@mui{/,}**",
        "@date-io{/,}**",
        "@emotion{/,}**",
        "luxon{/,}**",
        "material-ui{/,}**"
      ],
      "groupName": "material-ui"
    },
    {
      "matchPackageNames": ["antd{/,}**", "@ant-design{/,}**", "moment-timezone{/,}**"],
      "groupName": "antd"
    },
    {
      "matchPackageNames": ["@action-validator{/,}**"],
      "groupName": "action-validator"
    },
    {
      "matchPackageNames": [
        "react",
        "react-dom",
        "react-color",
        "html-react-parser",
        "dompurify",
        "react-tooltip",
        "react-helmet",
        "react-anchor-link-smooth-scroll",
        "react-ga",
        "react-social-sharing",
        "react-beforeunload",
        "react-icons"
      ],
      "groupName": "react"
    },
    {
      "matchPackageNames": ["react-intl{/,}**", "react-number-format{/,}**", "browser-lang{/,}**", "@lingui{/,}**"],
      "groupName": "intl"
    },
    {
      "matchPackageNames": ["html2canvas", "file-saver", "downloadjs", "exceljs"],
      "groupName": "file-saver"
    },
    {
      "matchPackageNames": ["cesium", "resium"],
      "groupName": "resium"
    },
    {
      "matchPackageNames": ["typescript{/,}**", "typedoc{/,}**", "@types{/,}**"],
      "groupName": "typescript"
    },
    {
      "matchPackageNames": ["@craco{/,}**", "react-scripts{/,}**", "craco{/,}**", "env-cmd{/,}**"],
      "groupName": "react-scripts"
    },
    {
      "matchPackageNames": ["electron{/,}**"],
      "groupName": "electron"
    },
    {
      "matchPackageNames": ["husky", "lint-staged", "prettier"],
      "groupName": "prettier"
    },
    {
      "matchPackageNames": ["jquery", "jquery-ui", "free-jqgrid"],
      "groupName": "jquery"
    },
    {
      "matchPackageNames": ["Adenson.{/,}**", "Pangaea.{/,}**"],
      "groupName": "PangaeaCore"
    },
    {
      "matchPackageNames": ["Saltarelle.{/,}**", "ScriptSharp.{/,}**"],
      "groupName": "Saltarelle"
    },
    {
      "matchPackageNames": ["Nancy{/,}**", "AjaxMin{/,}**", "Owin{/,}**"],
      "groupName": "Nancy"
    },
    {
      "matchPackageNames": ["Microsoft.{/,}**", "MSBuild.{/,}**", "System.{/,}**", "EntityFramework{/,}**"],
      "groupName": "Microsoft"
    },
    {
      "matchPackageNames": ["mganss{/,}**", "HtmlSanitizer{/,}**", "AngleSharp{/,}**"],
      "groupName": "HtmlSanitizer"
    },
    {
      "matchPackageNames": ["Aspose.{/,}**"],
      "groupName": "Aspose"
    },
    {
      "matchPackageNames": ["jsonwebtoken", "jwks-rsa"],
      "groupName": "jwks"
    },
    {
      "matchPackageNames": ["azure{/,}**", "@azure{/,}**"],
      "groupName": "azure"
    },
    {
      "matchPackageNames": ["@fortawesome{/,}**"],
      "groupName": "fontawesome"
    },
    {
      "matchPackageNames": ["suneditor{/,}**"],
      "groupName": "suneditor"
    },
    {
      "matchPackageNames": ["Newtonsoft{/,}**"],
      "groupName": "Newtonsoft"
    },
    {
      "matchPackageNames": [
        "typeconv{/,}**",
        "openapi-types{/,}**",
        "swagger-{/,}**",
        "ts-json-schema-generator{/,}**",
        "ajv-cli{/,}**"
      ],
      "groupName": "openapi"
    },
    {
      "matchManagers": ["nuget", "custom.regex"],
      "matchPackageNames": [
        "CsQuery{/,}**",
        "StyleCop{/,}**",
        "Effort.EF6{/,}**",
        "NUnit{/,}**",
        "pmd{/,}**",
        "JustMock{/,}**",
        "coverlet{/,}**",
        "AltCover{/,}**",
        "MSTest{/,}**",
        "Doxygen{/,}**",
        "dotnet-format{/,}**",
        "upgrade-assistant{/,}**",
        "Microsoft.NET.Test{/,}**",
        "Microsoft.CodeAnalysis{/,}**",
        "ReportGenerator{/,}**",
        "Moq{/,}**",
        "MSGReader{/,}**",
        "NMemory{/,}**",
        "Castle.Core{/,}**"
      ],
      "additionalBranchPrefix": "dev/",
      "commitMessagePrefix": "[Dev] ",
      "groupName": "Testing",
      "draftPR": false
    },
    {
      "matchManagers": ["nuget", "custom.regex"],
      "matchPackageNames": ["pangaea-gitlab"],
      "additionalBranchPrefix": "build/",
      "commitMessagePrefix": "[Build] ",
      "rangeStrategy": "replace",
      "groupName": "build",
      "draftPR": false
    },
    {
      "matchUpdateTypes": ["pin", "pinDigest"],
      "groupName": "Pin Dependencies"
    },
    {
      "matchUpdateTypes": ["lockFileMaintenance"],
      "additionalBranchPrefix": "dev/",
      "commitMessagePrefix": "[Dev] ",
      "groupName": "Lock File Maintenance"
    },
    {
      "matchCategories": ["ci", "cd"],
      "matchPackageNames": ["Azure{/,}**"],
      "rangeStrategy": "replace",
      "additionalBranchPrefix": "deploy/",
      "commitMessagePrefix": "[Deploy] "
    },
    {
      "matchDatasources": ["nuget"],
      "registryUrls": ["https://api.nuget.org/v3/index.json", "https://community.chocolatey.org/api/v2/"]
    },
    {
      "matchDatasources": ["gitlab-releases"],
      "registryUrls": ["https://code.cdso.army.mil"],
      "versioning": "regex:^v(?<major>\\d+)\\.(?<minor>\\d+)\\.(?<patch>\\d+)(-rc(?<build>\\d))?$"
    }
  ],
  "customManagers": [
    {
      "customType": "regex",
      "managerFilePatterns": [
        "/(^|/)(workflow-templates|\\.(?:github|gitea|forgejo|gitlab)/(?:workflows|actions|ci))/.+\\.ya?ml$/",
        "/(^|/)action\\.ya?ml$/",
        "/(^|/)ci\\.ya?ml$/",
        "/\\.gitlab-ci\\.ya?ml$/"
      ],
      "matchStrings": [
        "# renovate: datasource=(?<datasource>[a-zA-Z0-9-._]+?) depName=(?<depName>[^\\s]+?)(?: (?:lookupName|packageName)=(?<packageName>[^\\s]+?))?(?: versioning=(?<versioning>[^\\s]+?))?(?: extractVersion=(?<extractVersion>[^\\s]+?))?\\s+[A-Za-z0-9_]+?_VERSION\\s*:\\s*[\"']?(?<currentValue>.+?)[\"']?\\s"
      ]
    },
    {
      "customType": "regex",
      "managerFilePatterns": ["/\\.nuspec$/"],
      "matchStringsStrategy": "any",
      "matchStrings": ["<dependency\\s+id=\"(?<depName>.*?)\"\\s+version=\"(?<currentValue>.*?)\"\\s*\\/>"],
      "datasourceTemplate": "nuget",
      "versioningTemplate": "nuget"
    },
    {
      "customType": "regex",
      "managerFilePatterns": ["/\\.csproj$/"],
      "matchStringsStrategy": "any",
      "matchStrings": [
        "<.-- renovate: depName=(?<depName>[^\\s]+?) -->\\s+<[A-Za-z0-9_]+?Version>\\s*[\"']?(?<currentValue>.+?)[\"']?\\s*<"
      ],
      "datasourceTemplate": "nuget",
      "versioningTemplate": "nuget"
    }
  ]
}
